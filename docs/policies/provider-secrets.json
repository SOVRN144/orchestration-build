{
  "generated_at": "2025-10-25",
  "active_provider_for_ci": "1password",
  "providers": {
    "1password": {
      "auth": "service_account_token",
      "token_secret_name": "OP_SERVICE_ACCOUNT_TOKEN",
      "rotation_days": 90,
      "vaults": [
        "app-cicd"
      ],
      "notes": "Rotate token every 90 days; restrict to CI vault; Business plan required for Events API."
    },
    "doppler": {
      "auth": "pending",
      "rotation_days": null,
      "notes": "Add details when research arrives."
    },
    "aws_ssm": {
      "auth": "oidc_assume_role",
      "rotation_days": null,
      "notes": "Preferred for OIDC; define IAM role & policy; use aws-actions/configure-aws-credentials.",
      "iam": {
        "role": "arn:aws:iam::<account-id>:role/gha-ssm-reader",
        "policy_example": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Action": [
                "ssm:GetParameter",
                "ssm:GetParameters",
                "ssm:GetParameterHistory"
              ],
              "Resource": "arn:aws:ssm:<region>:<account-id>:parameter/<path-prefix>/*"
            }
          ]
        }
      }
    },
    "aws_secrets_manager": {
      "auth": "oidc_assume_role",
      "rotation_days": 30,
      "notes": "Supports automatic rotation via Lambda; VPC endpoints + KMS recommended.",
      "iam": {
        "role": "arn:aws:iam::<account-id>:role/gha-secrets-reader",
        "policy_example": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Action": [
                "secretsmanager:GetSecretValue",
                "secretsmanager:DescribeSecret"
              ],
              "Resource": "arn:aws:secretsmanager:<region>:<account-id>:secret:<prefix>*"
            }
          ]
        }
      }
    },
    "vault": {
      "auth": "oidc_jwt",
      "rotation_days": 1,
      "notes": "Use JWT/OIDC auth; issue short-lived tokens; restrictive policies per path."
    }
  }
}